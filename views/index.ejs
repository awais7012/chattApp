<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Resist Chat</title>
    <link rel="stylesheet" href="/styles.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
    />
    <!-- Add Socket.IO client library -->
    <script src="/socket.io/socket.io.js"></script>
    <!-- Add your script after Socket.IO -->
    <script>
      // Initialize socket connection
      const socket = io();

      // Wait for DOM to be fully loaded
      document.addEventListener("DOMContentLoaded", () => {
        // Remove alert after 5 seconds
        setTimeout(() => {
          const alert = document.getElementById("alert");
          if (alert) {
            alert.style.display = "none";
          }
        }, 5000);

        // Form submission handling
        const form = document.getElementById("form");
        const input = document.getElementById("input");
        const messages = document.getElementById("messages");

        if (form) {
          form.addEventListener("submit", (e) => {
            e.preventDefault();
            if (input.value) {
              // Send message
              socket.emit("chat message", { text: input.value });

              // Create sent message
              const messageDiv = document.createElement("div");
              messageDiv.className = "message sent";
              messageDiv.textContent = input.value;
              messages.appendChild(messageDiv);
              messages.scrollTop = messages.scrollHeight;
              input.value = "";
            }
          });
        }

        // Handle incoming messages
        socket.on("chat message", function (data) {
          const messageDiv = document.createElement("div");
          messageDiv.className = "message received";
          messageDiv.textContent = data.text;
          messages.appendChild(messageDiv);
          messages.scrollTop = messages.scrollHeight;
        });
      });
    </script>
  </head>

  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
      background-color: #000; /* Dark background */
      color: #fff;
    }

    .container {
      display: flex;
      flex-direction: column;
      height: 100vh;
    }

    #username-container {
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      height: 100vh;
    }

    #chat-container {
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    .chat-title {
      text-align: center;
      font-size: 24px;
      margin: 10px 0;
      text-shadow: 0 0 10px rgba(255, 255, 255, 0.7),
        0 0 20px rgba(255, 255, 255, 0.5), 0 0 30px rgba(255, 255, 255, 0.3);
    }

    #messages {
      flex: 1;
      overflow-y: auto;
      padding: 10px;
      background-color: #181818;
      border-top: 1px solid #333;
      border-bottom: 1px solid #333;
    }

    #message-form {
      display: flex;
      background-color: #303030;
      padding: 10px;
      border-top: 1px solid #333;
    }

    #message-input {
      flex: 1;
      padding: 10px;
      border-radius: 5px;
      border: none;
      background-color: #404040;
      color: #fff;
    }

    #message-input::placeholder {
      color: #bbb;
    }

    #message-form button {
      margin-left: 10px;
      padding: 10px 15px;
      border: none;
      border-radius: 5px;
      background-color: #555;
      color: #fff;
      cursor: pointer;
    }

    #message-form button:hover {
      background-color: #666;
    }

    footer {
      background-color: #303030;
      padding: 10px;
      text-align: center;
      border-top: 1px solid #333;
      position: fixed;
      bottom: 0;
      width: 100%;
    }

    .footer-content p {
      margin: 0;
      color: #bbb;
    }

    .footer-content a {
      color: #fff;
      text-decoration: none;
      margin: 0 5px;
    }

    .footer-content a:hover {
      text-decoration: underline;
    }

    .fab {
      font-size: 18px;
      margin-left: 5px;
    }

    /* Ensure the footer doesn't overlap the message form */
    #chat-container {
      margin-bottom: 50px; /* Adjust based on footer height */
    }
  </style>
  <body>
    <!-- Alert popup -->
    <div id="alert" class="alert-popup">
      Feel free to send racist, sexist, and Narcissist: msgs. If you want to
      contribute, fork the repo from GitHub!
    </div>

    <div class="chat-title">Racist Chat</div>

    <!-- Main chat area -->
    <div class="chat-container">
      <div id="messages"></div>
    </div>

    <!-- Fixed input area -->
    <div class="input-container">
      <form id="form" action="">
        <input
          id="input"
          autocomplete="off"
          placeholder="Type your message..."
        />
        <button type="submit">Send</button>
      </form>
    </div>

    <!-- Footer -->
    <footer>
      <div class="footer-content">
        <p>
          Developed by Romeo
          <a href="https://github.com/awais7012/" target="_blank">
            <i class="fab fa-github"></i>
          </a>
          <a href="https://www.instagram.com/_awai_s" target="_blank">
            <i class="fab fa-instagram"></i>
          </a>
          |
          <a
            href="https://github.com/awais7012/"
            target="_blank"
            class="github-link"
          >
            awais7012
          </a>
        </p>
      </div>
    </footer>
  </body>
</html>
